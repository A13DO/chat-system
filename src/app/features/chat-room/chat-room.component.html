<header>
  <app-header></app-header>
</header>

<div class="container">
  <aside>
    <app-user-list></app-user-list>
  </aside>

  <main>
    <mat-drawer-container class="example-container" style="height: 100%;" autosize>
      <mat-drawer-content>
        @if (ReceiverId === DEFAULT) {
        <h3 class="place-holder">Select a chat to start messaging</h3>
        } @else {
        <div class="chat-header">
          <div class="chat-info">
            <h1>Chat Room</h1>
            <span>Chatting with: {{ chatPartnerData.name }}</span>
          </div>
          <div class="chat-header-actions">
            <button class="video-call-icon" [disabled]="ReceiverId == DEFAULT" type="button"
              (click)="drawer.toggle(); isVideoCall=true" mat-button>
              <span class="material-icons">video_camera_front</span>
            </button>
          </div>
        </div>

        <section #chat class="chat"></section>

        <div class="message-input-container">
          <input #message type="text" id="message-bar" placeholder="Type your message...">
          <button class="btn" type="button" (click)="onSendMessage()" [disabled]="ReceiverId == DEFAULT">
            Send
          </button>
        </div>
        }
      </mat-drawer-content>

      <mat-drawer #drawer [position]="'end'" class="example-sidenav" mode="side">
        <app-video-call *ngIf="isVideoCall" (closeVideoCallDrawer)="drawer.close(); isVideoCall=false">
        </app-video-call>
      </mat-drawer>

    </mat-drawer-container>
  </main>
</div>

<script>
  lucide.createIcons();
</script>